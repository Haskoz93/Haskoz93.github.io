<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torneo Doble Eliminación</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { text-align: center; }
        .match { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Torneo de Doble Eliminación</h1>
    <div id="output"></div>
    <script>
        class Equipo {
            constructor(nombre) {
                this.nombre = nombre;
                this.derrotas = 0;
            }
        }

        const equipos = [
            new Equipo("Iago"),
            new Equipo("Kevin"),
            new Equipo("Nahi"),
            new Equipo("Gaby"),
            new Equipo("Dani"),
            new Equipo("Alex")
        ];

        const output = document.getElementById("output");

        function mostrarMensaje(mensaje) {
            output.innerHTML += `<p>${mensaje}</p>`;
        }

        function jugarTorneo() {
            let ganadores = [...equipos];
            let perdedores = [];

            mostrarMensaje("Inicio del Torneo de Doble Eliminación");

            while (ganadores.length > 1 || perdedores.length > 1) {
                ganadores = jugarRonda(ganadores, perdedores, "Bracket de Ganadores");
                if (perdedores.length > 1) {
                    perdedores = jugarRonda(perdedores, [], "Bracket de Perdedores");
                }
            }

            jugarGranFinal(ganadores[0], perdedores[0]);
        }

        function jugarRonda(lista, otraLista, titulo) {
            mostrarMensaje(`<h2>${titulo}</h2>`);
            const nuevosGanadores = [];

            for (let i = 0; i < lista.length; i += 2) {
                if (i + 1 >= lista.length) break;
                const e1 = lista[i];
                const e2 = lista[i + 1];
                const ganador = prompt(`¿Quién ganó? (${e1.nombre} o ${e2.nombre})`);
                const equipoGanador = ganador === e1.nombre ? e1 : e2;
                const equipoPerdedor = equipoGanador === e1 ? e2 : e1;

                mostrarMensaje(`${e1.nombre} vs ${e2.nombre} → Ganador: ${equipoGanador.nombre}`);

                equipoPerdedor.derrotas++;
                nuevosGanadores.push(equipoGanador);
                if (equipoPerdedor.derrotas < 2) {
                    otraLista.push(equipoPerdedor);
                }
            }

            return nuevosGanadores;
        }

        function jugarGranFinal(ganador, finalistaPerdedores) {
            mostrarMensaje("<h2>Gran Final</h2>");
            const finalGanador = prompt(`¿Quién ganó la final? (${ganador.nombre} o ${finalistaPerdedores.nombre})`);
            let campeon = finalGanador === ganador.nombre ? ganador : finalistaPerdedores;

            if (campeon === finalistaPerdedores) {
                mostrarMensaje("<h3>Desempate Final</h3>");
                const desempateGanador = prompt(`¿Quién ganó el desempate? (${ganador.nombre} o ${finalistaPerdedores.nombre})`);
                campeon = desempateGanador === ganador.nombre ? ganador : finalistaPerdedores;
            }

            mostrarMensaje(`<h1>¡El campeón del torneo es: ${campeon.nombre}!</h1>`);
        }

        jugarTorneo();
    </script>
</body>
</html>
